ホーム画面 &gt; プロジェクト選択 &gt; <Cmdname sid="side_analysis" className="uitext" /> &gt; <Cmdname sid="side_dbSqlAnalysis" className="uitext" />

データベースで実行されるSQL文を分析し、性能問題を診断するのに有用な資料を提供します。 <Cmdname sid="side_dbSqlAnalysis" className="uitext" />メニューは、2つの主要なタブで構成されています。 

- ***Access Statistics***: 性能低下の原因となり得るFull Scanが発生したSQLを確認できます。

- ***Plan Change History***: 同一のSQL IDを持つSQL文がオプティマイザによって他の実行プランに変更された場合を感知します。 これは性能に影響を与える可能性があるため、モニタリングが必要です。

## Access Statistics {#access_statistics}

性能低下の原因となり得るFull Scanが発生したSQLを確認できます。 時間別、タイプ別のFull Scan発生回数を確認できます。 これにより、Full Scanを頻繁に発生させるSQL文を最適化し、不要なFull Scanを減らすことで資源使用量を最適化できます。 また、Full ScanをIndex Scanに置き換えてクエリー性能を向上させる方法を考えてみてください。

<ImgLang img="db-analysis-sql-access-statistics.png" desc="AccessStatistics" />

画面上で照会時間と対象を選択してください。 <Cmdname sid="time" className="uitext" />と<Cmdname sid="instance" className="uitext" />オプションを設定した後![検索アイコン](/img/ico-btn-search.png)ボタンを選択してください。 必要な場合、<Cmdname sid="filter" className="uitext" />オプションを設定して、目的の照会結果をフィルタリングできます。

- ***Access Count***: 時間帯別のFull Scanの発生回数を確認できる棒グラフチャートです。 特定の時間帯を選択すると、選択した時間に実行されたSQLリストが画面の下のリストと右の***Operation Count*** チャートに表示されます。

- ***Operation Count***: Full Scanが発生したタイプとその数を確認できます。 各バーにマウスオーバーすると、オブジェクト名を確認できます。

  ![Operation Count](/img/db-analysis-sql-access-statistics-op-count.png)

{/* 쿼리 자세히 보기 */}
import QueryDetails from "../common-items/_db-query-details.mdx";

<QueryDetails level={3} />

### 参照結果フィルタリング

照会したSQLリストで<Cmdname sid="filter" className="uitext" />オプションを通じて**Full Scan**または**Index Scan**基準で結果をフィルタリングできます。

1. <Cmdname sid="filter" className="uitext" />オプションを選択してください。

   <ImgLang img="db-analysis-sql-access-statistics-filter.png" desc="フィルター" />

2. <Cmdname sid="TTL06737" className="uitext" />で***FULL***または***INDEX***項目を選択してください。

3. <Cmdname sid="apply" className="uitext" />ボタンを選択します。

4. 選択した条件をSQLリストに反映するには、![検索アイコン](/img/ico-btn-search.png)ボタンを選択してください。

:::note

Full Scan、Index Scanをすべて検索するには、<Cmdname sid="TTL06737" className="uitext" />で***FULL***、***INDEX***オプションをすべて選択してください。 または![プラスアイコン](/img/ic-s-plus.svg)ボタンを選択してフィルターオプションを追加できます。

:::

## Plan Change History {#plan_change_history}

同一のSQL IDを持つSQL文がオプティマイザによって他の実行プランに変更された場合を感知します。 これは性能に影響を与える可能性があるため、モニタリングが必要です。 プラン変更による性能変化を感知して対応し、不要なプラン変更を識別してSQL性能の一貫性を維持できます。

<ImgLang img="db-analysis-sql-plan-change-history.png" desc="Plan Change History" />

画面上で照会時間と対象を選択してください。 <Cmdname sid="time" className="uitext" />と<Cmdname sid="instance" className="uitext" />オプションを設定した後![検索アイコン](/img/ico-btn-search.png)ボタンを選択してください。

***Plan Change Count***セクションは、時間帯別のプラン変更が起きた回数を確認できる棒グラフチャートです。 特定の時間帯を選択すると、選択した時間のプラン変更の一覧を表示します。 

### Plan変更事項を確認する

画面下部の一覧で特定の変更項目を選択すると、画面下にプラン変更前後の詳細が確認できる***Query***セクションが表示されます。 プラン変更前後の相違点を詳細に比較することにより、どの変更が性能に影響したかを把握できます。

<ImgLang img="db-analysis-sql-plan-change-history-diff.png" desc="Plan Change History" />

- ***Query***セクションで右上の![新しいウィンドウのアイコン](/img/ic-popup.svg)ボタンを選択すると、そのセクションを新しいウィンドウに開いて確認できます。

- ***Query***セクションを閉じるには、右上の![閉じるアイコン](/img/ico-close.svg)ボタンを選択します。
